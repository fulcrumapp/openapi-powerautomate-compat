# Fulcrum Power Automate Connector Configuration
# This file contains metadata used to generate Microsoft certification package files

# Required fields
publisher: Fulcrum
displayName: Fulcrum
# Version is required and will override the version from the source API specification
# This allows the connector version to be managed independently from the underlying API version
version: "1.0.0"
description: |
  Fulcrum is a mobile data collection platform for field teams.
  This connector enables integration with Fulcrum's API for managing
  field data, photos, videos, and more.
iconBrandColor: "#F4F4F4"
category: Field Productivity
supportEmail: support@fulcrumapp.com
supportUrl: https://www.fulcrumapp.com/support

# Connection parameters (for dynamic configuration)
# These parameters allow users to customize connection behavior beyond authentication
connectionParameters:
  api_key:
    type: securestring
    uiDefinition:
      displayName: API Token
      description: Your Fulcrum API token for authentication
      tooltip: Generate an API token from your Fulcrum account settings
      constraints:
        required: "true"
        clearText: false
        tabIndex: 1
  hostUrl:
    type: string
    default: api.fulcrumapp.com
    uiDefinition:
      displayName: Host URL
      description: The API host for your Fulcrum instance
      tooltip: "Default: api.fulcrumapp.com. For other regions use: api.fulcrumapp-ca.com (Canada), api.fulcrumapp-au.com (Australia), api.fulcrumapp-eu.com (Europe)"
      constraints:
        required: false
        clearText: true
        tabIndex: 2

# Policy templates (for runtime behavior customization)
# These templates modify connector behavior at runtime using Microsoft Power Platform policies
policyTemplates:
  - templateId: dynamichosturl
    title: Set API Host URL
    parameters:
      x-ms-apimTemplateParameter.urlTemplate: "https://@connectionParameters('hostUrl', 'api.fulcrumapp.com')/api"

# README.md sections
prerequisites:
  - Active Fulcrum subscription with API access enabled

knownLimitations:
  - Rate limiting applies based on your Fulcrum plan

# Optional README sections
gettingStarted: |
  Create a new connection in Power Automate and enter your API token when prompted.

# Documentation
documentationUrl: https://developer.fulcrumapp.com

# Swagger Cleaner Configuration
# These settings control the swagger_cleaner.py transformation pipeline
swaggerCleaner:
  # Endpoints to keep in the cleaned specification
  # Format: "/path/method" (e.g., "/pets/get", "/users/{userId}/put")
  endpointsToKeep:
    - "/v2/attachments/{attachment_id}/get"
    - "/v2/attachments/get"
    - "/v2/audio.json/get"
    - "/v2/audio/{audio_id}.mp4/get"
    - "/v2/photos.json/get"
    - "/v2/photos/{photo_id}.jpg/get"
    - "/v2/photos/{photo_id}.json/get"
    - "/v2/query/post"
    - "/v2/records.json/get"
    - "/v2/records.json/post"
    - "/v2/records/{record_id}.json/delete"
    - "/v2/records/{record_id}.json/get"
    - "/v2/records/{record_id}.json/patch"
    - "/v2/records/{record_id}.json/put"
    - "/v2/records/{record_id}/history.json/get"
    - "/v2/reports.json/post"
    - "/v2/reports/{report_id}.pdf/get"
    - "/v2/signatures.json/get"
    - "/v2/signatures/{signature_id}.json/get"
    - "/v2/signatures/{signature_id}.png/get"
    - "/v2/videos.json/get"
    - "/v2/videos/{video_id}.mp4/get"
    - "/v2/webhooks.json/post"
    - "/v2/webhooks/{webhook_id}.json/delete"
  
  # Parameters to remove (authentication handled by Power Automate)
  parametersToRemove:
    - name: x-apitoken
      in: header
    - name: accept
      in: header
  
  # Info section configuration
  info:
    titleRestrictedWords:
      - api
      - connector
    description: "Fulcrum is a field-first solution that empowers both GIS experts and non-GIS team members to easily capture and share geospatial data."
    contact:
      name: Fulcrum Support
      url: https://www.fulcrumapp.com/support
      email: support@fulcrumapp.com
  
  # Root-level x-ms-connector-metadata
  connectorMetadata:
    - propertyName: Website
      propertyValue: https://www.fulcrumapp.com
    - propertyName: Privacy policy
      propertyValue: https://www.fulcrumapp.com/privacy
    - propertyName: Categories
      propertyValue: Productivity;Data